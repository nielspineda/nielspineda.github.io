<!doctype html>
<html lang="en-us">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Example Okta Sign-In Widget</title>

  <!--[if lt IE 9]>
  <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.2/html5shiv.min.js"></script>
  <![endif]-->

  <script src="https://ok1static.oktacdn.com/assets/js/sdk/okta-signin-widget/2.6.0/js/okta-sign-in.min.js" type="text/javascript"></script>
  <link href="https://ok1static.oktacdn.com/assets/js/sdk/okta-signin-widget/2.6.0/css/okta-sign-in.min.css" type="text/css" rel="stylesheet"/>
  <!-- Optional, customizable css theme options. Link your own customized copy of this file or override styles in-line -->
  <link href="https://ok1static.oktacdn.com/assets/js/sdk/okta-signin-widget/2.6.0/css/okta-theme.css" type="text/css" rel="stylesheet"/>
</head>
<body>
      <!-- Render the login widget here -->
  <div id="widget-container"></div>

  <!-- Script to init the widget -->
  <script>
  var signIn = new OktaSignIn({
  baseUrl: 'https://idx4.okta.com',
  clientId: '0oa4zafb5PcAJf75J356 ',
  redirectUri: 'https://nielspineda.com/',
  authParams: {
    issuer: 'default',
    responseType: ['id_token','token'],
    display: 'page'
  }
});

if (!signIn.token.hasTokensInUrl()) {
  signIn.renderEl({el: '#widget-container'},
    function() {},
    function(err) { console.err(err) });
}

else {
  signIn.token.parseTokensFromUrl(
    function success(res) {
      // Add the token to tokenManager to automatically renew the token when needed
      signIn.tokenManager.add('id_token', res[0]);
      signIn.tokenManager.add('access_token', res[1]);
    },
    function error(err) {
      console.log('handle error', err);
    }
  );
}
</script>
</body>
</html>
